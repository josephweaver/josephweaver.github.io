# Problem 6 — Martingale / Supermartingale Construction and Convergence  
*(Source: 2018.q6.pdf)*

> Let $\{X_n\}, \{Y_n\}, \{Z_n\}_{n\ge 0}$ be three sequences of random variables,  
> integrable, nonnegative, and adapted to $\{\mathcal F_n\}_{n\ge 0}$.  
> Assume  
> $$
> \sum_{k=1}^\infty Y_k < \infty \quad \text{a.s.}
> $$
> **(a)** Show that  
> $$
> \prod_{k=1}^n (1+Y_k)^2
> $$
> is non-decreasing and converges a.s.  
>  
> **(b)(i)** Show that  
> $$
> \left\{ \frac{X_n}{\prod_{k=1}^{\,n-1}(1+Y_k)^2},\ \mathcal F_n \right\}_{n\ge1}
> $$
> is a nonnegative supermartingale.  
>
> **(b)(ii)** Prove that  
> $$
> \left\{ \frac{\min(X_n,Z_n)}{\prod_{k=1}^{\,n-1}(1+Y_k)^2},\ \mathcal F_n \right\}_{n\ge1}
> $$
> is also a supermartingale.  
>
> **(c)** Conclude that $X_n$ and $\min(X_n,Z_n)$ converge a.s.


---

# Part (a)

## Claim  
The product  
$$
P_n := \prod_{k=1}^n (1+Y_k)^2
$$
is non-decreasing and converges almost surely.

## Proof  
Since $Y_k \ge 0$, we have $(1+Y_k)^2 \ge 1$. Therefore  
$$
P_{n+1} = P_n (1+Y_{n+1})^2 \ge P_n,
$$
so $\{P_n\}$ is non-decreasing.

To show convergence, consider the logarithm:
$$
\log P_n = \sum_{k=1}^n 2\log(1+Y_k).
$$
Because $Y_k \ge 0$, we may use the standard inequality  
$$
\log(1+Y_k) \le Y_k.
$$
Thus  
$$
\log P_n \le 2\sum_{k=1}^n Y_k.
$$
By the assumption $\sum Y_k < \infty$ a.s., the right-hand side is finite a.s., so  
$$
\log P_n
$$
converges a.s. Since $\log$ is continuous and monotone on $(0,\infty)$, this implies  
$$
P_n \to P_\infty < \infty \quad \text{a.s.}
$$

## Conclusion  
$$
\prod_{k=1}^n (1+Y_k)^2
$$
is non-decreasing and convergent almost surely.

## Key Ideas  
- Using **logarithms** to convert products into sums.  
- Inequality **$\log(1+u) \le u$** for $u\ge0$.  
- A non-decreasing positive sequence converges iff it is bounded.  
- Boundedness follows from the assumption $\sum Y_n < \infty$.  


---

# Part (b)(i)

Let  
$$
M_n := \frac{X_n}{\prod_{k=1}^{\,n-1}(1+Y_k)^2}.
$$

## Claim  
$\{M_n,\mathcal F_n\}$ is a nonnegative supermartingale.

## Proof  
**Nonnegativity.**  
Since $X_n \ge 0$ and each $(1+Y_k)^2 >0$,  
$$
M_n \ge 0.
$$

**Adaptedness and integrability** are inherited from $X_n$.

**Supermartingale property.**  
Compute:
$$
E[M_{n+1}\mid \mathcal F_n] 
= E\left[ \frac{X_{n+1}}{\prod_{k=1}^{\,n}(1+Y_k)^2} \,\middle|\, \mathcal F_n \right]
= \frac{1}{\prod_{k=1}^{\,n}(1+Y_k)^2} E[X_{n+1}\mid \mathcal F_n].
$$

The problem assumption (from the handwritten text) gives  
$$
E[X_{n+1}\mid \mathcal F_n] \le X_n (1+Y_n)^2.
$$

Substituting:
$$
E[M_{n+1}\mid \mathcal F_n] 
\le \frac{X_n (1+Y_n)^2}{\prod_{k=1}^{\,n}(1+Y_k)^2}
= \frac{X_n}{\prod_{k=1}^{\,n-1}(1+Y_k)^2}
= M_n.
$$

Thus $\{M_n\}$ is a supermartingale.

## Conclusion  
$$
M_n = \frac{X_n}{\prod_{k=1}^{n-1}(1+Y_k)^2}
$$
is a nonnegative supermartingale.

## Key Ideas  
- Constructing a supermartingale by **dividing out a known growth factor**.  
- Verifying supermartingale condition via  
  $$
  E[X_{n+1}\mid\mathcal F_n] \le X_n (1+Y_n)^2.
  $$
- Checking the three components: nonnegativity, integrability, adaptedness.  
- Dividing by the **product from part (a)**, which is monotone and finite.  


---

# Part (b)(ii)

Define  
$$
M_n^* := \frac{\min(X_n, Z_n)}{\prod_{k=1}^{\,n-1}(1+Y_k)^2}.
$$

## Claim  
$\{M_n^*, \mathcal F_n\}$ is a supermartingale.

## Proof  
**Nonnegativity.**  
Since $X_n\ge0$, $Z_n\ge0$,  
$$
\min(X_n,Z_n) \ge 0 \quad \Rightarrow\quad M_n^*\ge0.
$$

**Supermartingale property.**  
Define
$$
H_n := \frac{X_n}{\prod_{k=1}^{\,n-1}(1+Y_k)^2}, 
\qquad
J_n := \frac{Z_n}{\prod_{k=1}^{\,n-1}(1+Y_k)^2}.
$$
Part (b)(i) shows $H_n$ is a supermartingale.  
The same argument (replacing $X_n$ with $Z_n$) shows $J_n$ is also a supermartingale.

A standard result (the problem hint) states:

> **If $H_n$ and $J_n$ are supermartingales, then $\min(H_n, J_n)$  
> is also a supermartingale.**

Therefore,
$$
M_n^* 
= \min(H_n, J_n)
$$
is a supermartingale.

## Conclusion  
$$
\frac{\min(X_n,Z_n)}{\prod_{k=1}^{n-1}(1+Y_k)^2}
$$
is a supermartingale.

## Key Ideas  
- The **minimum of two supermartingales** is again a supermartingale.  
- Reduce the problem to part (b)(i) applied to $X_n$ and separately to $Z_n$.  
- Nonnegativity + adaptedness carry over through the $\min$ operator.  


---

# Part (c)

## Claim  
Both $X_n$ and $\min(X_n,Z_n)$ converge almost surely.

## Proof  
From parts (b)(i)–(ii),  
$$
M_n \quad \text{and} \quad M_n^*
$$
are nonnegative supermartingales.  
By the **Martingale Convergence Theorem**, each converges a.s.:
$$
M_n \to M_\infty, \qquad M_n^* \to M_\infty^* \qquad\text{a.s.}
$$

From part (a), the product  
$$
P_{n-1} := \prod_{k=1}^{n-1}(1+Y_k)^2
$$
converges a.s. to a finite limit $P_\infty >0$.

Now write:
$$
X_n = M_n \, P_{n-1}.
$$
Both factors converge a.s., so $X_n$ converges a.s.

Similarly,
$$
\min(X_n, Z_n) = M_n^* \, P_{n-1}
$$
converges a.s.

## Conclusion  
$$
X_n \to X_\infty, \qquad \min(X_n,Z_n) \to W_\infty
\quad\text{a.s.}
$$

## Key Ideas  
- **Nonnegative supermartingales converge** (MCT).  
- Express the original processes as  
  $$
  X_n = M_n \cdot \text{(deterministic convergent factor)}.
  $$
- Use part (a)'s product convergence to rebuild the limit of $X_n$.  
- Same reconstruction works for $\min(X_n,Z_n)$.  


---

# Summary of Techniques Learned

1. **Product Convergence via Logs**  
   - When facing $\prod (1+Y_n)^2$, take logs and use $\log(1+u)\le u$.

2. **Building a Supermartingale**  
   - Divide a process by its known multiplicative growth factor.  
   - Check the supermartingale inequality after the division.

3. **Minimum of Supermartingales**  
   - A very useful structural lemma: $\min(H_n, J_n)$ is supermartingale.

4. **Martingale Convergence Theorem**  
   - Every nonnegative supermartingale converges almost surely.

5. **Reconstructing the Limit of the Original Sequence**  
   - If $M_n = X_n / a_n$ and the normalizing factor $a_n$ converges,  
     then $X_n$ also converges.

